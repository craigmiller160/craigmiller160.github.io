<!DOCTYPE html>
<html>
<head>
</head>
<body>
<div id="content-welcome">
    <div class="page-header">
        <h1 class="page-title">Software Developer</h1>
    </div>
    <div class="row">
    	<div class="col-md-12">
    		<div id="images" class="img-container" />
    	</div>
    </div>
</div>
</body>
<script type="text/javascript">
// function old(){
// 	var imgArray = [
// 		"content/images/java.png",
// 		"content/images/android-activity.png",
// 		"content/images/sql.png"
// 	];

// 	function addImage(src, index){
// 		var img = $("<img/>");
// 		img.addClass("slideshow");

// 		img.attr("src", src);
// 		img.attr("alt", src);
// 		$("#images").append(img);
// 		if(index > 0){
// 			$(img).hide();
// 		}
// 	}

// 	function preload(imageArray){
// 		$(imageArray).each(function(index, value){
// 			var image = new Image();
// 			image.onload = function(){
// 				addImage(image.src, index);
// 			};
// 			image.onerror = function(){
// 				alert("error");
// 			};
// 			image.src = value;
// 		});
// 	}
// 	preload(imgArray);

// 	$(".slideshow").eq(0).show();

// 	function cycle(oldIndex, currentIndex) {

// 		$(".slideshow").eq(oldIndex).fadeOut(200, function(){
// 			$(".slideshow").eq(currentIndex).fadeIn(200);
// 		});
// 	}

// 	var currentIndex = 0;

// 	var autoSlide = setInterval(function(){
// 		var oldIndex = currentIndex;
// 		currentIndex += 1;
// 		if (currentIndex > 3 - 1){
// 			currentIndex = 0;
// 		}

// 		cycle(oldIndex, currentIndex);
// 	}, 3000);
// }

function addImage(src, alt, index){
	var img = $("<img/>");
	img.addClass("slideshow");

	img.attr("src", src);
	img.attr("alt", alt);
	$("#images").append(img);
	if(index > 0){
		$(img).hide();
	}
}

function preload(imgArray){
	$.each(imgArray, function(index, value){
		var image = new Image();
		image.onload = function(){
			addImage(image.src, value.alt, index);
		};
		image.onerror = function(){
			console.log("Error loading image: " + value.src);
			addImage("", value.alt, index);
		};
		image.src = value.src;
	});
}

function cycle(oldIndex, currentIndex) {
	$(".slideshow").eq(oldIndex).fadeOut(200, function(){
		$(".slideshow").eq(currentIndex).fadeIn(200);
	});
}

$(document).ready(function(){
	var currentIndex = 0;

	$.getJSON("content/welcome-slideshow.json", function (data){
		console.log(data.images[0]);
		preload(data.images);

		var autoSlide = setInterval(function(){
			var oldIndex = currentIndex;
			currentIndex += 1;
			if (currentIndex > 3 - 1){
				currentIndex = 0;
			}

			cycle(oldIndex, currentIndex);
		}, 3000);
	});
});
</script>
</html>